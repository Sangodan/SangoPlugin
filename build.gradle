/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
import org.apache.tools.ant.filters.*





allprojects {
    apply plugin: 'java'
	apply plugin: 'eclipse'
    group = 'org.gradle.sample'
    version = '1.0'
}

subprojects {
	compileJava.options.encoding = 'UTF-8'
	compileTestJava.options.encoding = 'UTF-8'
	javadoc.options.encoding = 'UTF-8'
	tasks.withType(JavaCompile) {
		options.encoding = 'UTF-8'
	}
	repositories {
		mavenCentral()
		maven {
			url "https://hub.spigotmc.org/nexus/content/repositories/snapshots/"
		}
		maven {
			url "https://oss.sonatype.org/content/groups/public/"
		}
		mavenLocal()
	}
	dependencies {
		compileOnly 'org.spigotmc:spigot-api:1.8-R0.1-SNAPSHOT'
		compileOnly 'org.spigotmc:spigot:1.8-R0.1-SNAPSHOT'
	}

	processResources {
		filter ReplaceTokens, tokens: [
				"VERSION": project.version
		]
	}
	jar {
		archivesBaseName = project.name + " " + project.version
		destinationDir = file("$rootDir/libs")
		jar.archiveName = "${jar.baseName}.${jar.extension}"
	}
	
}
tasks.eclipse.dependsOn(cleanEclipse)

clean.doFirst {
    delete "${rootDir}libs"
}

project(':SangoPlugin') {
	dependencies {
		compileOnly project(':SangoAPI')
	}
}

project(':SangoSocial') {
	dependencies {
		compileOnly project(':SangoAPI')
	}
}
project(':SangoBuild') {
	dependencies {
		compileOnly project(':SangoAPI')
	}
}

task gEclipse {
	doLast {
		cleanEclipse
		eclipse
	}
}
build.finalizedBy(gEclipse)